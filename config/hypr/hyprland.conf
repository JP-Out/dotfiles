# ██╗  ██╗██╗   ██╗██████╗ ██████╗ ██╗      █████╗ ███╗   ██╗██████╗ 
# ██║  ██║╚██╗ ██╔╝██╔══██╗██╔══██╗██║     ██╔══██╗████╗  ██║██╔══██╗
# ███████║ ╚████╔╝ ██████╔╝██████╔╝██║     ███████║██╔██╗ ██║██║  ██║
# ██╔══██║  ╚██╔╝  ██╔═══╝ ██╔══██╗██║     ██╔══██║██║╚██╗██║██║  ██║
# ██║  ██║   ██║   ██║     ██║  ██║███████╗██║  ██║██║ ╚████║██████╔╝
# ╚═╝  ╚═╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═════╝ 
# http://patorjk.com/software/taag/#p=display&f=ANSI%20Shadow&t=Type%20Something%20

debug:disable_logs=false

# ╔══════════════════════════════════╗
# ║            MONITORS              ║
# ╚══════════════════════════════════╝

# Configuração dos monitores
# https://wiki.hypr.land/Configuring/Monitors/
monitor=DP-2,1920x1080@165,0x0,1,

# ╔══════════════════════════════════╗
# ║           MY PROGRAMS            ║
# ╚══════════════════════════════════╝

# Programas usados com atalhos
$terminal = kitty
$fileManager = dolphin
$menu = wofi --show drun

# ╔══════════════════════════════════╗
# ║             AUTOSTART            ║
# ╚══════════════════════════════════╝

# Programas iniciados junto com o Hyprland
exec-once = swaync
exec-once = waybar
exec-once = env -u QT_QPA_PLATFORM steam -silent
exec-once = copyq
exec-once = flatpak run com.rtosta.zapzap
  
exec-once = ~/.config/hypr/scripts/hyprpaper_change.sh
exec-once = hyprpaper

# Mostra a waybar quando o mouse encosta no topo e esconde quando sai
exec-once = ~/.config/hypr/scripts/waybar-hover-daemon.sh

exec-once = hyprctl setcursor rose-pine-hyprcursor 32

exec-once = udiskie
exec-once = kbuildsycoca6
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = wl-paste --type image --watch cliphist store # Stores only image data
exec-once = wl-paste --type text --watch cliphist store # Stores only text data
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# ╔══════════════════════════════════╗
# ║      ENVIRONMENT VARIABLES       ║
# ╚══════════════════════════════════╝

env = PATH,/home/shaka/bin:/home/shaka/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/bin

# Variáveis de ambiente
env = TERMINAL,kitty
env = LANG,pt_BR.UTF-8
env = LC_TIME,pt_BR.UTF-8
env = LC_ALL,pt_BR.UTF-8
env = XDG_MENU_PREFIX,arch-

# hyprcursor (Hyprland) e Xcursor (Qt/GTK/XWayland/Flatpak)
env = HYPRCURSOR_THEME, rose-pine-hyprcursor
env = HYPRCURSOR_SIZE, 32
env = XCURSOR_THEME, BreezeX-RosePine-Linux
env = XCURSOR_SIZE, 32

# Para o Qt encontrar os temas na HOME
env = XCURSOR_PATH, $HOME/.local/share/icons:$HOME/.icons:/usr/share/icons

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland

env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1

# ╔══════════════════════════════════╗
# ║            PERMISSIONS           ║
# ╚══════════════════════════════════╝

# Permissões (requer reiniciar o Hyprland)
# https://wiki.hypr.land/Configuring/Permissions/

# ecosystem {
#     enforce_permissions = 1
# }

# Exemplos:
# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow


# ╔══════════════════════════════════╗
# ║           LOOK AND FEEL          ║
# ╚══════════════════════════════════╝

# ─────────────────────────────
#  Aparência geral
# ─────────────────────────────
general {
    gaps_in = 8
    gaps_out = 3, 10, 10, 10
    border_size = 2

    col.active_border = rgba(7aa2f7ff)     # Azul claro
    col.inactive_border = rgba(1a1b26ff)   # Azul escuro quase preto

    resize_on_border = false               # Redimensionar ao arrastar bordas
    allow_tearing = false                  # Evita screen tearing
    layout = dwindle
}

# ─────────────────────────────
#  Decoração de janelas
# ─────────────────────────────
decoration {
    rounding = 10
    rounding_power = 2

    # Transparência
    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    blur {
        enabled = true
        size = 1
        passes = 1
        vibrancy = 0.910
    }
}

# ─────────────────────────────
#  Animações
# ─────────────────────────────
animations {
    enabled = yes, please :)

    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
}

# ─────────────────────────────
#  Layouts
# ─────────────────────────────
dwindle {
    pseudotile = true       # Pseudotile: janela respeita tamanho mas mantém layout
    preserve_split = true
}

master {
    new_status = master
}

# ─────────────────────────────
#  Miscelânea
# ─────────────────────────────
misc {
    force_default_wallpaper = -1      # -1 mantém wallpapers padrões do Hyprland
    disable_hyprland_logo = false     # true desativa mascote do Hyprland
    focus_on_activate = true
}


# ╔══════════════════════════════════╗
# ║              INPUT               ║
# ╚══════════════════════════════════╝

# ─────────────────────────────
#  Configurações de teclado, mouse e touchpad
# ─────────────────────────────
# https://wiki.hypr.land/Configuring/Variables/#input
input {
    kb_layout = br
    kb_variant = abnt2
    kb_model =
    kb_options = kpdl:dot
    kb_rules =
    numlock_by_default = true        # NumLock ativado por padrão

    follow_mouse = 1                 # Foco segue o mouse

    accel_profile = adaptive
    sensitivity = 0                  # -1.0 a 1.0 (0 = padrão)

    touchpad {
        natural_scroll = false       # Desativa rolagem invertida
    }
}

# device:razer-razer-viper-ultimate-dongle {
#     accel_profile = flat
#     sensitivity = -0.3
# }

# ─────────────────────────────
#  Gestos do touchpad
# ─────────────────────────────
# https://wiki.hypr.land/Configuring/Variables/#gestures
gestures {
    workspace_swipe = false          # Desativa swipe para trocar workspaces
}

# ─────────────────────────────
#  Configuração por dispositivo
# ─────────────────────────────
# https://wiki.hypr.land/Configuring/Keywords/#per-device-input-configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5               # Sensibilidade personalizada para o mouse
}


# ╔══════════════════════════════════╗
# ║           KEYBINDINGS            ║
# ╚══════════════════════════════════╝

# Mod principal
$mainMod = SUPER

# ─────────────────────────────
#  Aplicativos principais
# ─────────────────────────────
bind = $mainMod, Return, exec, $terminal
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, A, exec, $menu
bind = $mainMod, SPACE, exec, pkill rofi || rofi -show drun
# bind = $mainMod, SPACE, exec, pkill rofi || rofi -show run

# ─────────────────────────────
#  Controle do Hyprland
# ─────────────────────────────
bind = $mainMod, Q, killactive
bind = $mainMod, X, exec, nwg-bar    # Abre o powermenu
bind = $mainMod, F, fullscreen
bind = $mainMod, P, pseudo           # dwindle
bind = $mainMod, J, togglesplit      # dwindle

# ─────────────────────────────
#  Janela flutuante personalizada
# ─────────────────────────────
bind = $mainMod ALT, V, exec, hyprctl dispatch togglefloating && \
    hyprctl dispatch resizeactive exact 1200 800 && \
    hyprctl dispatch centerwindow

# ─────────────────────────────
#  Navegação entre janelas
# ─────────────────────────────
bind = $mainMod, left,  movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up,    movefocus, u
bind = $mainMod, down,  movefocus, d

# Alternativa estilo Vim
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

# ─────────────────────────────
#  Trocar posição das janelas (swap)
# ─────────────────────────────
bind = $mainMod SHIFT, H, swapwindow, l
bind = $mainMod SHIFT, L, swapwindow, r
bind = $mainMod SHIFT, K, swapwindow, u
bind = $mainMod SHIFT, J, swapwindow, d

# ─────────────────────────────
#  Gerenciar janelas flutuantes
# ─────────────────────────────
bind = $mainMod SHIFT, F, bringactivetotop
bind = $mainMod SHIFT, B, exec, hyprctl dispatch focuswindow l || hyprctl dispatch focuswindow r
bind = $mainMod, TAB, exec, hyprctl dispatch cyclenext floating && hyprctl dispatch bringactivetotop

# ─────────────────────────────
#  Mover janelas flutuantes
# ─────────────────────────────
binde = $mainMod CTRL, H, moveactive, -50 0
binde = $mainMod CTRL, L, moveactive, 50 0
binde = $mainMod CTRL, K, moveactive, 0 -50
binde = $mainMod CTRL, J, moveactive, 0 50

# ─────────────────────────────
#  Redimensionar janelas (floating ou tiling)
# ─────────────────────────────
binde = $mainMod ALT, H, resizeactive, -50 0   # Diminuir largura
binde = $mainMod ALT, L, resizeactive, 50 0    # Aumentar largura
binde = $mainMod ALT, K, resizeactive, 0 -50   # Diminuir altura
binde = $mainMod ALT, J, resizeactive, 0 50    # Aumentar altura

# ─────────────────────────────
#  Promover janela para Master (layout master)
# ─────────────────────────────
bind = $mainMod SHIFT, RETURN, layoutmsg, swapwithmaster

# ─────────────────────────────
#  Workspaces
# ─────────────────────────────
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Workspaces especiais (scratchpad)
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Scroll entre workspaces
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up,   workspace, e-1

# ─────────────────────────────
#  Mover/Redimensionar com mouse
# ─────────────────────────────
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# ─────────────────────────────
#  Multimídia
# ─────────────────────────────
bindl = , XF86AudioNext,  exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay,  exec, playerctl play-pause
bindl = , XF86AudioPrev,  exec, playerctl previous

# ─────────────────────────────
#  Screenshots - Capturar a Tela
# ─────────────────────────────
bind = $mainMod, Print, exec, "$HOME/.local/bin/screenshot.sh" full
bind = $mainMod SHIFT, Print, exec, "$HOME/.local/bin/screenshot.sh" area

# ─────────────────────────────
#  Waybar
# ─────────────────────────────

bind = $mainMod, M, exec, ~/.config/hypr/scripts/waybar-mode-toggle.sh # Toggle de modo: hover <-> manual
bind = $mainMod, TAB, exec, ~/.config/hypr/scripts/toggle-waybar-gaps.sh # Mostra <-> Esconde quando no modo manual

#bind = $mainMod, Escape, exec, "$HOME/.config/hypr/scripts/toggle-waybar-gaps.sh"                                       # Reinicia a Waybar

# ─────────────────────────────
#  Extras
# ─────────────────────────────
bind = $mainMod, W, exec, "$HOME/.config/hypr/scripts/hyprpaper_change.sh"                                              # Altera o papel de parede
bind = $mainMod CTRL SHIFT, L, exec, hyprlock                                                                           # Bloquear tela
bind = $mainMod, N, exec, sleep 0.1 && swaync-client -t -sw                                                             # Abre o SwayNC
bind = $mainMod SHIFT, N, exec, pkill swaync && sleep 0.2 && swaync &                                                   # Reinicia o SwayNC
bind = $mainMod, V, exec, copyq toggle & sleep 0.1 && hyprctl dispatch focuswindow "class:^(com.github.hluk.copyq)$"    # Abre o CopyQ
bind = $mainMod, period, exec, rofi -modi emoji -show emoji -emoji-format '{emoji}' -theme ~/.config/rofi/launchers/emoji.rasi    # Seletor de emojis com o Rofi

# ╔═════════════╗
# ║ APLICATIVOS ║
# ╚═════════════╝

# Documentação oficial:
# https://wiki.hypr.land/Configuring/Window-Rules/
# https://wiki.hypr.land/Configuring/Workspace-Rules/

# ─────────────────────────────
#  Exemplos de regras
# ─────────────────────────────

# Exemplo de regra para flutuar uma janela específica
# windowrule = float, class:^(kitty)$, title:^(kitty)$

# ─────────────────────────────
#  Regras úteis para o sistema
# ─────────────────────────────

# Ignorar requisições de maximização de apps (evita comportamento estranho)
windowrule = suppressevent maximize, class:.*

# Corrige problemas de arrastar janelas XWayland em certas condições
windowrule = nofocus, class:^$, title:^$, xwayland:1, floating:1, fullscreen:0, pinned:0

# CopyQ abrindo como popup flutuante
windowrulev2 = float, class:^(com.github.hluk.copyq)$
windowrulev2 = move 80% 60%, class:^(com.github.hluk.copyq)$
windowrulev2 = size 300 400, class:^(com.github.hluk.copyq)$
# windowrulev2 = stayfocused, class:^(com.github.hluk.copyq)$
windowrulev2 = noinitialfocus, class:^(com.github.hluk.copyq)$

# Regras para o popup do calendario "galendae"
windowrulev2 = stayfocused,class:^(galendae)$
windowrulev2 = noanim,class:^(galendae)$
windowrulev2 = move 1608 60,class:^(galendae)$
windowrulev2 = pin,class:^(galendae)$
